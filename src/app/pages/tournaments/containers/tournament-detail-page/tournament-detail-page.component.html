<ion-header translucent="true">
    <ion-toolbar>
        <ion-buttons slot="start">
            <ion-back-button></ion-back-button>
        </ion-buttons>
        <ion-title>Tournois</ion-title>
    </ion-toolbar>
</ion-header>
<ion-content>

    <div style="height: 25vh;"
         leaflet
         [leafletOptions]="options"
         (leafletMapReady)="onMapReady($event)">
    </div>
    <div *ngIf="tournament$|async as tournament">
        <div class="ion-padding">
            <ion-text>{{tournament.DateFrom | date}} <span
                    *ngIf="tournament.DateTo">- {{tournament.DateTo |date}}</span>
            </ion-text>
            <h1>{{tournament.Name}}</h1>

            <ion-button [disabled]="registrationClosed(tournament)" color="primary" class="ion-margin-top" [expand]="'block'" (click)="register(tournament)">
                <span *ngIf="registrationClosed(tournament) && !isPast(tournament)">Inscription terminée</span>
                <span *ngIf="registrationClosed(tournament) && isPast(tournament)">Tournois terminé</span>
                <span *ngIf="!registrationClosed(tournament)">S'inscrire</span>
            </ion-button>
        </div>

        <hr>
        <ion-list>
            <ion-item *ngIf="!isPast(tournament)">
                <ion-icon icon="time-outline" slot="start"></ion-icon>
                <ion-label>Fin inscription: {{tournament.RegistrationDate | date}}</ion-label>
            </ion-item>
            <ion-item>
                <ion-icon icon="podium-outline" slot="start"></ion-icon>
                <ion-label class="ion-text-wrap">Niveau: {{'DIVISION_LEVEL.' + Level[tournament.Level] | translate}}</ion-label>
            </ion-item>
            <ion-item detail>
                <ion-icon icon="list-outline" slot="start"></ion-icon>
                <ion-label class="ion-text-wrap" (click)="seriesClicked(tournament)">{{tournament.SerieCount}} séries</ion-label>
            </ion-item>
            <ion-item detail *ngIf="tournament.Venue">
                <ion-icon icon="navigate-outline" slot="start"></ion-icon>
                <ion-label class="ion-text-wrap">{{tournament.Venue?.Name}}
                    , {{tournament.Venue?.Street}} {{tournament.Venue?.Town}}</ion-label>
            </ion-item>

        </ion-list>
    </div>

</ion-content>
